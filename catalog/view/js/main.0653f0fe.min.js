(()=>{"use strict";var t,e={340:(t,e,s)=>{s.d(e,{X:()=>kt});var o=s(236),n=s(636);function i(t=document){const e=t.querySelector(".swiper");if(!e)return;const s=e.querySelectorAll(".swiper-slide").length,i=window.innerWidth<=767;let r=null;i||(r=new o.A(".product_thumbs_swiper",{loop:s>4,spaceBetween:10,slidesPerView:4,freeMode:!0,watchSlidesProgress:!0}));return{productThumbsSwiper:r,productMainSwiper:new o.A(".product_main_swiper",{modules:i?[n.Vx]:[n.Vx,n.WO],loop:s>1,spaceBetween:10,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:r}})}}function r(t=document){const e={};return t.querySelectorAll(".swiper-carousel").forEach(((t,s)=>{let n=0;t.querySelectorAll(".swiper-slide").forEach((t=>{const e=t.offsetWidth;e>n&&(n=e)})),t.querySelectorAll(".swiper-slide").forEach((t=>{t.style.minWidth=n+"px"}));const i={slidesPerView:"auto",freeMode:!0,spaceBetween:10},r={autoplay:!!t.dataset.autoplay&&{delay:parseInt(t.dataset.autoplay),disableOnInteraction:!1},slidesPerView:t.dataset.slides?parseInt(t.dataset.slides):i.slidesPerView},a=JSON.parse(t.dataset.swiperConfig||"{}");e[`swiper${s}`]=new o.A(t,{...i,...r,...a})})),e}const a=function(){function t(t){var e=this;this.listener=function(t){(t.matches?e.matchFns:e.unmatchFns).forEach((function(t){t()}))},this.toggler=window.matchMedia(t),this.toggler.addListener(this.listener),this.matchFns=[],this.unmatchFns=[]}return t.prototype.add=function(t,e){this.matchFns.push(t),this.unmatchFns.push(e),(this.toggler.matches?t:e)()},t}();var c=function(t){return Array.prototype.slice.call(t)},l=function(t,e){return c((e||document).querySelectorAll(t))},d="mm-spn";const u=function(){function t(t,e,s,o,n){this.node=t,this.title=e,this.slidingSubmenus=o,this.selectedClass=s,this.node.classList.add(d),this.node.classList.add(d+"--"+n),this.node.classList.add(d+"--"+(this.slidingSubmenus?"navbar":"vertical")),this._setSelectedl(),this._initAnchors()}return Object.defineProperty(t.prototype,"prefix",{get:function(){return d},enumerable:!1,configurable:!0}),t.prototype.openPanel=function(t){var e=t.parentElement;if(this.slidingSubmenus){var s=t.dataset.mmSpnTitle;e===this.node?this.node.classList.add(d+"--main"):(this.node.classList.remove(d+"--main"),s||c(e.children).forEach((function(t){t.matches("a, span")&&(s=t.textContent)}))),s||(s=this.title),this.node.dataset.mmSpnTitle=s,l("."+d+"--open",this.node).forEach((function(t){t.classList.remove(d+"--open"),t.classList.remove(d+"--parent")})),t.classList.add(d+"--open"),t.classList.remove(d+"--parent");for(var o=t.parentElement.closest("ul");o;)o.classList.add(d+"--open"),o.classList.add(d+"--parent"),o=o.parentElement.closest("ul")}else{var n=t.matches("."+d+"--open");l("."+d+"--open",this.node).forEach((function(t){t.classList.remove(d+"--open")})),t.classList[n?"remove":"add"](d+"--open");for(var i=t.parentElement.closest("ul");i;)i.classList.add(d+"--open"),i=i.parentElement.closest("ul")}},t.prototype._setSelectedl=function(){var t=l("."+this.selectedClass,this.node),e=t[t.length-1],s=null;e&&(s=e.closest("ul")),s||(s=this.node.querySelector("ul")),this.openPanel(s)},t.prototype._initAnchors=function(){var t=this;this.node.addEventListener("click",(function(e){var s=e.target,o=!1;o=o||function(t){return!!t.matches("a")}(s),o=o||function(e){var s;return!!(s=e.closest("span")?e.parentElement:!!e.closest("li")&&e)&&(c(s.children).forEach((function(e){e.matches("ul")&&t.openPanel(e)})),!0)}(s),o=o||function(e){var s=l("."+d+"--open",e),o=s[s.length-1];if(o){var n=o.parentElement.closest("ul");if(n)return t.openPanel(n),!0}return!1}(s),o&&e.stopImmediatePropagation()}))},t}();var h="mm-ocd";const p=function(){function t(t,e){var s=this;void 0===t&&(t=null),this.wrapper=document.createElement("div"),this.wrapper.classList.add(""+h),this.wrapper.classList.add(h+"--"+e),this.content=document.createElement("div"),this.content.classList.add(h+"__content"),this.wrapper.append(this.content),this.backdrop=document.createElement("div"),this.backdrop.classList.add(h+"__backdrop"),this.wrapper.append(this.backdrop),document.body.append(this.wrapper),t&&this.content.append(t);var o=function(t){s.close(),t.stopImmediatePropagation()};this.backdrop.addEventListener("touchstart",o,{passive:!0}),this.backdrop.addEventListener("mousedown",o,{passive:!0})}return Object.defineProperty(t.prototype,"prefix",{get:function(){return h},enumerable:!1,configurable:!0}),t.prototype.open=function(){this.wrapper.classList.add(h+"--open"),document.body.classList.add(h+"-opened")},t.prototype.close=function(){this.wrapper.classList.remove(h+"--open"),document.body.classList.remove(h+"-opened")},t}();var m=function(){function t(t,e){void 0===e&&(e="all"),this.menu=t,this.toggler=new a(e)}return t.prototype.navigation=function(t){var e=this;if(!this.navigator){var s=(t=t||{}).title,o=void 0===s?"Menu":s,n=t.selectedClass,i=void 0===n?"Selected":n,r=t.slidingSubmenus,a=void 0===r||r,c=t.theme,l=void 0===c?"light":c;this.navigator=new u(this.menu,o,i,a,l),this.toggler.add((function(){return e.menu.classList.add(e.navigator.prefix)}),(function(){return e.menu.classList.remove(e.navigator.prefix)}))}return this.navigator},t.prototype.offcanvas=function(t){var e=this;if(!this.drawer){var s=(t=t||{}).position,o=void 0===s?"left":s;this.drawer=new p(null,o);var n=document.createComment("original menu location");this.menu.after(n),this.toggler.add((function(){e.drawer.content.append(e.menu)}),(function(){e.drawer.close(),n.after(e.menu)}))}return this.drawer},t}();const g=m,f=g;function v(t){const e=w("div","","text-danger");return e.textContent=t,e}window.MmenuLight=g;const w=(t,e="",s="",o={})=>{const n=document.createElement(t);return(e=e.startsWith("#")?e.slice(1):e)&&(n.id=e),(s=s.replace(".",""))&&(n.className=s),Object.entries(o).forEach((([t,e])=>n.setAttribute(t,e))),n};const y=new class{constructor(){this.rules={name:{min:3,max:25},text:{min:15,max:3e3},rating:{checked:!0},email:{min:5,max:96,pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/},phone:{min:18,max:18,pattern:/^\+?[\d\s\-\(\)]+$/},agree_privacy_policy:{checked:!0}},this.messages={required:"Поле обязательно для заполнения",len:"Допустимая длина от {min} до {max} символов",pattern:"Некорректный формат",checked:"Выберите значение",phone:"Введите номер с кодом города",agree_privacy_policy:"Для обработки нужно дать согласие"},this.fields=["phone","email","name","text","rating","agree_privacy_policy"],this.errorTextClass="validation-error-text",this.errorElementClass="validation-error-element",this.init()}init(){this.initialized||(this.bindEvents(),this.initialized=!0)}bindEvents(){document.addEventListener("input",(t=>{t.target.matches('input[name="number"]')&&this.realTimeCheckNumberInput(t.target),t.target.matches('input[name="phone"]')&&this.realTimeCheckPhoneInput(t.target)}))}clearNotifications(t){t.querySelectorAll(`.${this.errorTextClass}`).forEach((t=>t.remove())),t.querySelectorAll(`.${this.errorElementClass}`).forEach((t=>t.classList.remove(this.errorElementClass)))}validateForm(t){this.clearNotifications(t);var e=!0;return this.fields.forEach((s=>{const o=t.querySelector(`[name="${s}"]`);if(o){const t=this.validateField(s,o);t&&(this.showError(o,t),e=!1)}})),e}showError(t,e){(t=this.getAvailableElement(t)).classList.add(this.errorElementClass),t.after(this.createError(e))}getAvailableElement(t){return"none"===window.getComputedStyle(t).display&&(t=this.getAvailableElement(t.parentNode)),t}validateField(t,e){const s=this.rules[t];if(!s)return null;if(s.checked){const o=!!e.parentNode.querySelector(`[name="${t}"]:checked`);if(e.required&&s.checked!=o)return this.messages?.[t]||this.messages.checked}if(e.required&&!e.value.trim())return this.messages?.[t]||this.messages.required;if(!e.required&&!e.value.trim())return null;const o=e.value.length;return s.min&&s.max&&(o<s.min||o>s.max)?this.messages?.[t]||this.messages.len.replace("{min}",s.min).replace("{max}",s.max):s.pattern&&!s.pattern.test(e.value)?this.messages.pattern:null}createError(t){const e=w("div","",this.errorTextClass);return e.textContent=t,e}realTimeCheckNumberInput(t){t.value=t.value.replace(/[^\d,]/g,"")}realTimeCheckPhoneInput(t){let e=t.value.replace(/\D/g,"");/^[78]/.test(e)||(e="7"+e),t.value=e.replace(/^(\d)(\d{0,3})(\d{0,3})(\d{0,2})(\d{0,2})/,((t,e,s,o,n,i)=>`+7${s?` (${s}`:""}${o?`) ${o}`:""}${n?`-${n}`:""}${i?`-${i}`:""}`))}};class b{constructor(t){this.target=t}show(){const t=w("div","","masked"),e=w("div","","loading");this.target.append(t,e)}hide(){this.target.querySelectorAll(".masked, .loading").forEach((t=>t.remove()))}}const E="#toast-container";class S{constructor(t){this.container=document.body.querySelector(E),this.container||(this.container=document.body.append(w("div",E))),this.toastsSelector=t?`.toast-${t}`:""}show(t,e){if(!this.container)return;if(Array.isArray(t)){if(0===t.length)return;return void t.forEach((t=>this.show(t.text,t.category)))}if("string"!=typeof t)return;var s,o;switch(e){case"error":s="bg-danger",o='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-circle text-white" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"></path><path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"></path></svg>';break;case"warning":s="bg-warning",o='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-exclamation-circle text-white" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"></path><path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"></path></svg>';break;case"success":s="bg-primary",o='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-check-circle text-white" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/><path d="m10.97 4.97-.02.022-3.473 4.425-2.093-2.094a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05"/></svg>';break;default:s="bg-primary",o='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle text-white" viewBox="0 0 16 16"><path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/><path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/></svg>'}const n=w("div","",this.toastsSelector);n.innerHTML=`\n      <div class="toast alert-success" role="status" aria-live="polite">\n        <div class="toast-icon ${s}">${o}</div>\n        <div class="toast-body toast-message">${t}</div>\n        <button type="button" class="btn-close toast-close" aria-label="Закрыть"></button>\n      </div>\n    `,this.container.insertBefore(n,this.container.firstChild);const i=setTimeout((()=>{n.style.opacity="0",n.style.transition="opacity 0.5s ease",setTimeout((()=>n.remove()),500)}),5e3);n.querySelector(".toast-close").addEventListener("click",(()=>{clearTimeout(i),n.remove()}))}clear(){const t=this.container.querySelectorAll(this.toastsSelector||".toast");for(const e of t)e.remove()}}const k={async loadHtml(t,e,s){try{await new Promise((t=>setTimeout(t,300)));const o=await fetch(t);if(!o.ok)throw new Error("Network response was not ok");const n=await o.text();e.innerHTML=n,s&&s()}catch(t){console.error("Error loading:",t)}},async getJson(t){try{const e=await fetch(t);if(!e.ok)throw new Error("Network response was not ok");const s=e.headers.get("content-type");if(!s||!s.includes("application/json"))throw new Error("Invalid content type");const o=await e.json();return o}catch(t){return console.error("Error fetching session data:",t),null}},postFormData:async(t,e)=>fetch(t,{method:"POST",body:new URLSearchParams(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()}))},x={async submit(t,e,s={}){if(!t)return;const o=new S("Forms"),n=new b(t),i=t.querySelector("[type=submit]");try{if(n.show(),i&&(i.disabled=!0),!y.validateForm(t))return;y.clearNotifications(t);const r=new FormData(t);for(const t of Object.keys(s))r.append(t,s[t]);const a=await fetch(e,{method:"POST",body:new URLSearchParams(r)});if(!a.ok)throw new Error("Network response was not ok");o.clear();const c=await a.json();return c.toasts&&o.show(c.toasts),c.success&&(o.show(c.success,"success"),this.afterSucces()),c}catch(t){console.error("Ошибка:",t),o.show("Произошла ошибка при отправке","error")}finally{i&&(i.disabled=!1),n.hide()}},resetForm(t){if(!t)return;t.reset();const e=t.querySelectorAll(".stars .glyphicon");e&&e.forEach((t=>{t.classList.remove("glyphicon-star"),t.classList.add("glyphicon-star-empty")}));const s=t.querySelector("input, textarea, select");s&&s.focus()},postFormData:async(t,e)=>fetch(t,{method:"POST",body:new URLSearchParams(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((t=>{if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return t.json()}))},q=(t,e)=>{let s,o;return function(){const n=this,i=arguments;o?(clearTimeout(s),s=setTimeout((function(){Date.now()-o>=e&&(t.apply(n,i),o=Date.now())}),e-(Date.now()-o))):(t.apply(n,i),o=Date.now())}},C=(t,e)=>{let s;return function(){const o=this,n=arguments;clearTimeout(s),s=setTimeout((()=>{t.apply(o,n)}),e)}};const L=new class{constructor(){this.handlers=new Map}on(t,e,s,o={}){const n=o.throttle?q(s,o.throttle):o.debounce?C(s,o.debounce):s;t.addEventListener(e,n),this._storeHandler(t,e,n)}delegate(t,e,s,o,n={}){this.on(t,e,(t=>{const e=t.target.closest(s);e&&o(t,e)}),n)}off(t,e){if(!this.handlers.has(t))return;const s=this.handlers.get(t);if(s.has(e)){for(const o of s.get(e))t.removeEventListener(e,o);s.delete(e)}}offAll(t){if(!this.handlers.has(t))return;const e=this.handlers.get(t);if(!e||"object"!=typeof e)return void this.handlers.delete(t);const s=Object.keys(e);for(const o of s){const s=e[o];s&&"function"==typeof s.forEach&&s.forEach((e=>{t.removeEventListener(o,e)})),delete e[o]}this.handlers.delete(t)}_storeHandler(t,e,s){this.handlers.has(t)||this.handlers.set(t,{}),this.handlers.get(t)[e]||(this.handlers.get(t)[e]=[]),this.handlers.get(t)[e].push(s)}};const I=new class{constructor(){this.globalHandlers={}}addHandlers(t=[],e=document,s=null){Object.entries(t).forEach((([t,o])=>{L.delegate(e,"click",`[data-action="${t}"]`,((t,e)=>{s&&s[o]&&s[o].call(s,t,e)}))}))}},T={};class _{constructor(t={}){this.config={...T,...t},this.selectors=this.config.selectors,this.endpoints=this.config.endpoints,this.events=this.config.events,this.dialog=null,this.content=null,this.loading=null,this.initialized=!1,this.notifications=new S(this.config.moduleName),Object.assign(this,k,x),this.init()}init(){this.initialized||(this.bindEvents(),this.initialized=!0)}bindEvents(){I.addHandlers(this.config.globalEvents,document,this)}showLoading(t){new b(t).show()}hideLoading(t){new b(t).hide()}handleError(t){console.error(`[${this.moduleName}] Error:`,t),this.dispatchEvent("error",{error:t.message})}sendFormData(t,e){return this.postFormData(t,e)}dispatchEvent(t,e={}){const s=new CustomEvent(`${this.config.moduleName}-events:${t}`,{detail:e,bubbles:!0,cancelable:!0});document.dispatchEvent(s)}event(t,e,s,o={}){L.delegate(document,t,e,s.bind(this),o)}getSelectors(t,e={}){return t?(t=Array.isArray(t)?t:[t]).map((t=>{let s=t;for(const[t,o]of Object.entries(e))null!=o&&(s=s.replace(new RegExp(`{${t}}`,"g"),o));return s})):[]}}function A(t,e,s=!0,o=null){var n=O(t)||[];const i=n.includes(e.toString());return n=n.filter((t=>t!==e.toString())),s&&i||n.unshift(e.toString()),o&&n.length>o&&(n=n.slice(0,o)),P(t,n.join(","),30),n.length}function O(t){const e=function(t){const e=t+"=",s=document.cookie.split(";");for(let t=0;t<s.length;t++){let o=s[t];for(;" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e))return decodeURIComponent(o.substring(e.length,o.length))}return null}(t);if(e){try{return e.trim().startsWith("{")||e.trim().startsWith("[")?JSON.parse(e):e?e.split(","):[]}catch(e){console.warn(`Cookie ${t} looks like JSON but parsing failed:`,e)}return e}}function P(t,e,s=30){const o=new Date;o.setTime(o.getTime()+24*s*60*60*1e3);const n="expires="+o.toUTCString();"object"==typeof e&&null!==e&&(e=JSON.stringify(e)),document.cookie=t+"="+encodeURIComponent(e)+";"+n+";path=/;SameSite=Lax"}function B(){return{cart:Object.keys(O("cart")??{}),wishlist:O("wishlist")??[],compare:O("compare")??[]}}const M={};class H extends _{constructor(t={}){super({...M,...t})}init(){if(this.initialized)return;const t=B();t&&(this.markProducts(t[this.config.moduleName]||[]),this.updateTotalCount(t[this.config.moduleName].length||0)),super.init()}markProducts(t,e=document){t?.forEach((t=>{const s=this.getSelectors(this.selectors.btns,{product_id:t});s?.forEach((t=>{e.querySelectorAll(t).forEach((t=>{t.classList.contains(`in-${this.config.moduleName}`)||this.updateButton(t)}))}))}))}bindEvents(){const t=`${this.config.moduleName}-toggle`;I.addHandlers({[t]:"toggle"},document,this),super.bindEvents()}toggle(t,e){const{productId:s}=e.dataset;if(!s)return;const o=this.addToCookieList(s);return this.updateTotalCount(o),this.updateButtons(s),!0}addToCookieList(t){return A(this.config.moduleName,t)}updateButtons(t){let e=[];e=void 0===t?[`.in-${this.config.moduleName}`]:this.getSelectors(this.selectors.btns,{product_id:t}),e?.forEach((t=>{document.querySelectorAll(t).forEach(this.updateButton.bind(this))}))}updateButton(t,e=!1){const{titleOut:s,textOut:o,actionIn:n,titleIn:i,textIn:r,moduleName:a}=this.config,c=!t.classList.contains(`in-${a}`);t.classList.toggle(`in-${a}`,c),c?(s&&t.setAttribute("title",s),o&&(t.innerHTML=o),n&&t.setAttribute("data-action",n)):(i&&t.setAttribute("title",i),r&&(t.innerHTML=r),t.setAttribute("data-action",`${a}-toggle`))}updateTotalCount(t){const e=document.querySelectorAll(`.${this.config.moduleName}-total`);t=!t||t<1?"":`<span>${t}</span>`,e.forEach((e=>e.innerHTML=t))}}const z={moduleName:"compare",selectors:{btns:['.compare[data-product-id="{product_id}"]']}};const N=new class extends H{constructor(){super(z)}},D={moduleName:"wishlist",titleIn:"В закладки",titleOut:"Из закладок",selectors:{btns:['.wishlist[data-product-id="{product_id}"]']}};const j=new class extends H{constructor(){super(D)}},F={selectors:{popupId:"",popupClass:"",popupCenter:".popup-center",popupHeader:".popup-heading",tooltips:[".tooltip"],submitBtn:['[data-action="submit"]'],purchaseForm:"#purchase-form"},modalEvents:{close:"close",submit:"handleSubmit"}};class U{constructor(t={}){this.config={...F,...t,selectors:{...F.selectors,...t.selectors},modalEvents:{...F.modalEvents,...t.modalEvents},globalEvents:{...F.globalEvents,...t.globalEvents},endpoints:{...F.endpoints,...t.endpoints}},this.selectors=this.config.selectors,this.endpoints=this.config.endpoints,this.dialog=null,this.content=null,this.loading=null,this.initialized=!1,this.notifications=new S,Object.assign(this,k,x),this.init()}init(){this.initialized||(this.createDialog(),this.bindEvents(),this.loading=new b(this.dialog),this.initialized=!0)}bindEvents(){I.addHandlers(this.config.globalEvents,document,this)}bindPopupEvents(){I.addHandlers(this.config.modalEvents,this.dialog,this)}addEvent(t,e,s,o={}){L.delegate(this.dialog,t,e,s.bind(this),o)}delEvents(){L.offAll(this.dialog)}createDialog(){this.dialog=w("dialog","",this.selectors.popupClass,{"aria-modal":"true"}),this.content=w("div",this.selectors.popupId),this.dialog.appendChild(this.content),document.body.appendChild(this.dialog)}beforeShow(){const t=document.querySelector("dialog[open]");t&&t.close(),this.loading.show(),this.hideDropdowns(),this.hideTooltips(),this.hideVisible(),document.body.classList.add("popup-open")}afterShow(){this.bindPopupEvents(),this.loading.hide()}async show(t){await this.beforeShow();const e=new CustomEvent("popup:opening",{bubbles:!0,cancelable:!0,detail:{popup:this,url:t}});if(!this.dialog.dispatchEvent(e))return;this.dialog.showModal(),"string"!=typeof t&&(t=this.endpoints.content),await this.loadHtml(t,this.content);const s=new CustomEvent("popup:opened",{bubbles:!0,detail:{popup:this,url:t}});this.dialog.dispatchEvent(s),this.afterShow()}hideDropdowns(){document.querySelectorAll(this.selectors.dropdowns).forEach((t=>{t.style.display="none"}))}hideVisible(){document.querySelectorAll(".temporarily-visible").forEach((t=>{t.classList.remove("temporarily-visible")}))}hideTooltips(){document.querySelectorAll(this.selectors.tooltips).forEach((t=>{t.style.display="none"}))}cleanupAfterClose(){document.querySelectorAll(this.selectors.dropdowns).forEach((t=>{t.style.display=""})),document.body.classList.remove("popup-open")}close(t,e){this.delEvents(),this.dialog.close(),this.content.innerHTML="",this.cleanupAfterClose()}handleErrors(t){if(this.dialog.querySelectorAll(".text-danger").forEach((t=>t.remove())),this.dialog.querySelectorAll(".error_style").forEach((t=>t.classList.remove("error_style"))),t.option)for(const[e,s]of Object.entries(t.option)){const t=this.dialog.querySelector(`#input-option${e.replace("_","-")}`);t&&t.after(v(s))}if(t.recurring){const e=this.dialog.querySelector('select[name="recurring_id"]');e&&e.after(v(t.recurring))}if(t.z_min_sum){const e=this.dialog.querySelector(".product_max");e&&e.after(v(t.z_min_sum))}}async handleSubmit(){const t=this.dialog.querySelector(this.selectors.purchaseForm),e=await this.submit(t,this.endpoints.submit);e&&(e.error&&this.handleErrors(e.error),e.html&&this.handleSuccess(e.html))}handleSuccess(t){const e=this.dialog.querySelector(this.selectors.popupCenter);e&&(e.innerHTML=t),this.removecheckoutBtn()}removecheckoutBtn(){const t=this.dialog.querySelector(this.selectors.submitBtn);t&&t.remove();const e=this.dialog.querySelector('[data-action="quick-order"]');e&&e.remove();const s=this.dialog.querySelector(".checkout-btn");s&&s.remove()}}const V={endpoints:{cartInfo:"index.php?route=common/cart/info"},selectors:{quantityInput:".plus-minus",optionInput:'[data-action="update_prices_product"]',productIdInput:'input[name="product_id"]',quantity:".change-quantity button",quantityContainer:".number",removeButton:"button.remove",productItem:".cart-product-item",productItemList:".cart-product-items"}};class R extends U{constructor(t={}){super({...V,...t,selectors:{...V.selectors,...t.selectors},modalEvents:{...V.modalEvents,...t.modalEvents},globalEvents:{...V.globalEvents,...t.globalEvents},endpoints:{...V.endpoints,...t.endpoints}})}bindPopupEvents(){super.bindPopupEvents(),this.addEvent("click",this.selectors.quantity,this.quantityChange),this.addEvent("change",this.selectors.quantityInput,this.quantityChangeManual),this.addEvent("input",this.selectors.quantityInput,this.quantityChangeManual),this.addEvent("change",this.selectors.optionInput,this.optionChange),this.addEvent("click",this.selectors.removeButton,this.removeItem)}optionChange(t,e){const s=e.closest(this.selectors.productItem);this.updateProduct(s),document.dispatchEvent(new CustomEvent("optionChange"))}quantityChange(t,e){const s=e.closest(this.selectors.productItem).querySelector(this.selectors.quantityInput),{productId:o,action:n}=e.dataset,i=parseInt(s.value)+("quantity+"===n?1:-1);this.updateQuantity(s,i,o)}quantityChangeManual(t,e){if("keyup"===t.type&&!["ArrowUp","ArrowDown"].includes(t.key))return;const s=e.closest(this.selectors.productItem),{productId:o}=s.dataset;if(e.onblur=()=>{e.value.trim()||(e.value=1,this.updateQuantity(e,1,o))},!e.value)return this.updateProductTotal(s),void this.updateTotalSum();let n=parseInt(e.value)||1;"ArrowUp"===t.key&&n++,"ArrowDown"===t.key&&n--,this.updateQuantity(e,n,o)}updateQuantity(t,e,s){e=Math.max(1,Math.min(99,e)),t.value=e;const o=t.closest(this.selectors.productItem);this.updateProduct(o)}getProductInfo(t){const e=t.querySelectorAll('.options input[type="checkbox"]:checked');let s=parseFloat(t.dataset.productPrice),o=[];e.forEach((t=>{s+=parseFloat(t.dataset.optionPrice||0),o.push(t.dataset.optionId)}));const n=parseInt(t.querySelector(this.selectors.quantityInput).value)||0;return{productTotal:s,quantity:n,options:o}}updateProductTotal(t){let{productTotal:e,quantity:s,options:o}=this.getProductInfo(t);e*=s,t.dataset.total=e;const n=t.querySelector(".price");n&&(n.innerHTML=kt(e))}updateProduct(t){this.updateProductTotal(t),this.updateTotalSum();const{productTotal:e,quantity:s,options:o}=this.getProductInfo(t),{productId:n}=t.dataset;G.addToCookieList(n,s,o)}removeItem(t,e){const s=e.closest(this.selectors.productItem),{productId:o}=s.dataset;s.remove(),this.updateTotalSum();const n=G.addToCookieList(o,0);G.updateTotalCount(n),G.updateButtons(o)}afterShow(){super.afterShow(),this.checkOptions(),this.updateTotalSum();const t=O("wishlist");j.markProducts(t)}checkOptions(){const t=this.content.querySelector(this.selectors.productItemList);if(!t)return;const e=t.querySelectorAll(this.selectors.productItem);if(!e.length)return;const s=O("cart");e.forEach((t=>{const e=s[t.dataset.productId]||{};e.options?.forEach((e=>{const s=t.querySelector(`[data-option-id="${e}"]`);s&&(s.checked=!0)}))}))}updateTotalSum(){const t=this.content.querySelector(this.selectors.productItemList);if(!t)return this.content.querySelector(this.selectors.popupCenter).innerHTML="В корзине пусто",void this.removecheckoutBtn();const e=t.querySelectorAll(this.selectors.productItem);if(!e.length)return this.content.querySelector(this.selectors.popupCenter).innerHTML="В корзине пусто",void this.removecheckoutBtn();let s=0;e.forEach((t=>{t.dataset.total||this.updateProductTotal(t),s+=parseFloat(t.dataset.total)}));const o=this.content.querySelector("#all_total");o&&(o.innerHTML=kt(s))}handleSuccess(t){var e;e="cart",document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",G.updateTotalCount(0),G.updateButtons(),super.handleSuccess(t)}}const W={duration:400};class J{constructor(t,e={}){this.config={...W,...e},this.initialized=!1,this.options=W,this.container=t,this.init()}init(){this.initialized||(this.initElements(),this.bindEvents(),this.initialized=!0)}initElements(){this.openBtn=this.container.querySelector(".open-box"),this.closeBtn=this.container.querySelector(".close-box"),this.hiddenContent=this.container.querySelector(".hidden-content-box"),this.switchableContent=this.container.querySelector(".switchable-content-box"),this.openBtn&&this.hiddenContent&&(this.input=this.hiddenContent.querySelector("input, textarea"),this.hiddenContent.style.display="none",this.hiddenContent.style.overflow="hidden",this.hiddenContent.style.height="0",this.hiddenContent.style.transition=`height ${this.options.duration}ms ease`)}bindEvents(){this.openBtn&&this.hiddenContent&&(this.openBtn.addEventListener("click",this.handleOpen.bind(this)),this.closeBtn&&this.closeBtn.addEventListener("click",this.handleClose.bind(this)))}handleOpen(t){t&&t.preventDefault(),this.openBtn.style.display="none",this.switchableContent&&this.slideUp(this.switchableContent,this.options.duration),this.slideDown(this.hiddenContent,this.options.duration,(()=>{this.input?.focus(),this.hiddenContent.scrollIntoView({behavior:"smooth",block:"center"})}))}handleClose(t){t&&t.preventDefault(),this.slideUp(this.hiddenContent,this.options.duration),this.switchableContent&&this.slideDown(this.switchableContent,this.options.duration),this.openBtn.style.display="block"}slideDown(t,e,s){t.style.display="block";const o=t.scrollHeight+"px";t.style.height=o,setTimeout((()=>{s&&s(),t.style.height="auto"}),e)}slideUp(t,e,s){t.style.height="0",t.style.display="none"}open(){this.handleOpen()}close(){this.handleClose()}toggle(){"none"===this.hiddenContent.style.display?this.open():this.close()}}const Q={selectors:{popupId:"#popup-cart"},endpoints:{content:"index.php?route=modal/cart",submit:"index.php?route=modal/cart/send"},globalEvents:{"open-popup-cart":"show"}};const X=new class extends R{constructor(){super(Q)}afterShow(){this.toggleBox=new J(this.content),super.afterShow()}},Y={moduleName:"cart",textIn:"Купить",titleIn:"Добавить в корзину",textOut:"В корзине",titleOut:"Перейти в корзину",actionIn:"open-popup-cart",endpoints:{toggle:"index.php?route=checkout/cart/add"},selectors:{removeButton:".remove button",quantityInput:"#revcart_upd .plus-minus",productIdInput:'#revcart_upd input[name="product_id"]',quantityPlus:"#revcart_upd .btn-plus button",quantityMinus:"#revcart_upd .btn-minus button",quantityContainer:"#revcart_upd .number",cartContent:".rev_cart",btns:['.btn-cart[data-product-id="{product_id}"]']},globalEvents:{update_prices_product:"updateProductPrice"}};const G=new class extends H{constructor(){super(Y)}toggle(t,e){super.toggle(t,e)&&X.show()}addToCookieList(t,e,s){return function(t,e=1,s=[]){if(!t)return;const o="cart",n=O(o)||{};n[t]&&0==e?delete n[t]:n[t]||(n[t]={}),n[t]&&(n[t].quantity=e,Object.keys(s).length>0?n[t].options=s:n[t].options&&delete n[t].options);const i=Object.keys(n);if(i.length>100){const t={};Object.keys(n).slice(-100).forEach((e=>{t[e]=n[e]})),n=t}return P(o,n),i.length}(t,e,s)}},K={endpoints:{content:"index.php?route=modal/cartquick",submit:"index.php?route=modal/cartquick/send"},selectors:{popupId:"#popup-cart-quick"},globalEvents:{"quick-order":"show"}};new class extends R{constructor(){super(K)}};const Z={selectors:{popupId:"#popup-phone"},endpoints:{content:"index.php?route=modal/callback",submit:"index.php?route=modal/callback/send"},globalEvents:{"open-popup-call":"show"}};new class extends U{constructor(){super(Z)}};const tt={selectors:{popupId:"#popup-predzakaz"},endpoints:{content:"index.php?route=modal/predzakaz&revproduct_id=",submit:"index.php?route=modal/predzakaz/send"},globalEvents:{predzakaz:"show"}};new class extends U{constructor(){super(tt)}show(t,e){const s=e.dataset.productId||"";this.zakazType=e.getAttribute("title")||e.getAttribute("data-original-title")||"";const o=`${this.endpoints.content}${s}`;super.show(o)}afterShow(){this.dialog.querySelector(this.selectors.popupHeader).innerHTML=this.zakazType,super.afterShow()}};class et extends _{constructor(t){super(t),Object.assign(this,k,x)}init(t=document){this.container=t.querySelector(this.selectors.container),this.container&&(this.content=this.container.querySelector(this.selectors.content),this.content&&(this.productId=this.content.dataset.productId,this.productId&&(this.form=this.container.querySelector("form"),this.submitButton=this.form.querySelector('[type="submit"]'),this.loading=new b(this.content),this.toggleBox=new J(this.container),super.init())))}bindEvents(){document.addEventListener("click",this.handleClick.bind(this))}handleClick(t){const e=t.target.closest(this.selectors.loadTrigger);if(e&&e.dataset.count>0&&null==this.container.querySelector(".review-list"))return void this.loadContent(`${this.config.endpoints.load}${this.productId}`);const s=t.target.closest(this.selectors.pagination);if(s&&this.container)return t.preventDefault(),void this.loadContent(s.href);t.target==this.submitButton&&(t.preventDefault(),this.submitForm())}async loadContent(t){this.loading.show(),await this.loadHtml(t,this.content),this.loading.hide()}async submitForm(){const t=`${this.config.endpoints.write}${this.productId}`,e={product_id:this.productId};this.submit(this.form,t,e)}async afterSucces(){this.resetForm(),this.toggleBox.close()}}function st(t=document){const e=t.querySelectorAll(".rat-star");e.forEach((t=>{t.addEventListener("mouseover",(()=>{let e=t;for(;e=e.previousElementSibling;)e.classList.contains("rat-star")&&e.classList.add("active");t.classList.add("active")})),t.addEventListener("mouseout",(()=>{e.forEach((t=>t.classList.remove("active")))})),t.addEventListener("click",(()=>{e.forEach((t=>t.classList.remove("checked")));let s=t;for(;s;)s.classList.contains("rat-star")&&s.classList.add("checked"),s=s.previousElementSibling;const o=t.getAttribute("for");if(o){const t=document.getElementById(o);t&&(t.checked=!0)}}))}))}const ot={moduleName:"review",endpoints:{load:"index.php?route=product/product/getReviews&product_id=",write:"index.php?route=product/product/writeReview&product_id="},selectors:{container:".reviews_container",content:"#reviews",pagination:".pagination a",loadTrigger:"#load_reviews"}};const nt=new class extends et{constructor(){super(ot)}bindEvents(){st(this.form),super.bindEvents()}},it={moduleName:"answer",endpoints:{load:"index.php?route=product/product/getAnswers&product_id=",write:"index.php?route=product/product/writeAnswer&product_id="},selectors:{container:".answers_container",content:"#answers",pagination:".pagination a",loadTrigger:"#load_answers"}};const rt=new class extends et{constructor(){super(it)}};function at(t=document){const e=t.querySelector("#counter_data");if(!e)return;const{type:s,id:o}=e.dataset;if(A("viewed",o,!1,10),navigator.sendBeacon&&!navigator.userAgent.includes("bot")&&!navigator.webdriver&&window.outerWidth>100){const t=new URLSearchParams;t.append("type",s),t.append("id",o),navigator.sendBeacon("index.php?route=api/statistic/pageViewCounter",t)}}const ct={globalEvents:{update_prices_product:"priceChange"}};const lt=new class extends _{constructor(){super(ct)}init(t=document){const e=t.querySelector("#counter_data");if(!e)return;const{type:s,id:o}=e.dataset;"product"==s&&(this.productId=o,this.container=t,this.infoBox=t.querySelector(".product_informationss"),this.checkOptions(),this.calculatePrice(),i(),this.bindEvents())}bindEvents(){document.addEventListener("optionChange",(()=>this.checkOptions())),super.bindEvents()}checkOptions(){const t=(O("cart")||{})[this.productId]||{};if(!t)return;const e=t.options||[];this.infoBox.querySelectorAll("[data-option-id]").forEach((t=>t.checked=e.includes(t.dataset.optionId)))}priceChange(t,e){this.calculatePrice();const s=this.infoBox.querySelectorAll('input[type="checkbox"]:checked'),o=Array.from(s).map((t=>t.dataset.optionId));G.addToCookieList(this.infoBox.dataset.productId,1,o)}calculatePrice(){const t=this.infoBox.querySelectorAll('input[type="checkbox"]:checked'),{productPrice:e}=this.infoBox.dataset;let s=parseFloat(e);t.forEach((t=>s+=parseFloat(t.dataset.optionPrice)));const o=this.infoBox.querySelector(".price");o&&(o.innerHTML=kt(s))}};function dt(t=document){const e=B();e&&(G.markProducts(e.cart||[]),j.markProducts(e.wishlist||[]),N.markProducts(e.compare||[]))}const ut={selectors:{popupId:"#popup-quick-view",popupClass:".big-dialog"},endpoints:{content:"index.php?route=modal/quickview&revproduct_id="},globalEvents:{"quick-view":"show"}};new class extends U{constructor(){super(ut)}show(t,e){const s=`${this.endpoints.content}${e.dataset.productId}`;super.show(s)}afterShow(){super.afterShow();const t=document.querySelector(".nav.nav-tabs li:first-child a");t&&t.click(),i(this.content),dt(this.content),nt.init(this.content),rt.init(this.content),lt.init(this.content),at(this.content)}};const ht={initObserver(t){if(!t)return void console.error("Container not found for observer");if(!this.observerHandler)return void console.error("Not found observerHandler");if(this.loadingCondition&&!this.loadingCondition())return;const e=document.createElement("div");e.className="lazy-placeholder",t.appendChild(e);this.observer=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&(this.observerHandler(),this.observer.unobserve(t.target))}))}),{root:null,rootMargin:"200px",threshold:.1}),this.observer.observe(e)},disconnectObserver(){this.observer&&this.observer.disconnect()}},pt={selectors:{},endpoints:{}};class mt{constructor(t={}){this.config={...pt,...t,selectors:{...pt.selectors,...t.selectors},endpoints:{...pt.endpoints,...t.endpoints}},this.selectors=this.config.selectors,this.endpoints=this.config.endpoints,this.container=document.getElementById(this.selectors.containerId),this.loaded=!1,this.observer=null,Object.assign(this,k,ht),this.container&&this.initObserver(this.container)}observerHandler(){this.loaded||this.loadHtml(this.contentUrl(),this.container,(()=>{this.loaded=!0,this.afterLoad()}))}contentUrl(){const t=document.querySelector("#counter_data");if(!t||"product"!=t.dataset.type)return;const e=t.dataset.id;return`${this.endpoints.content}&revproduct_id=${e}`}afterLoad(){}}class gt extends mt{constructor(t={}){super(t)}afterLoad(){r(this.container),dt(this.container)}}const ft={selectors:{containerId:"viewed-products"},endpoints:{content:"index.php?route=revolution/viewed_products"}};const vt=new class extends gt{constructor(){super(ft)}loadingCondition(){const t=document.querySelector("#counter_data");if(!t)return;const e=t.dataset.id,s=O("viewed")||[],o=s.includes(e.toString());return s.length>1||1==s.length&&!o}},wt={selectors:{containerId:"related-products"},endpoints:{content:"index.php?route=product/module/similar_products&revproduct_id="}};new class extends gt{constructor(){super(wt)}};new class{constructor(t={}){this.initialized=!1,this.init()}init(){this.initialized||(this.bindEvents(),this.initialized=!0)}addEvent(t,e,s,o={}){L.delegate(document,t,e,s.bind(this),o)}bindEvents(){this.addEvent("click","[data-show-target]",this.showTarget)}showTarget(t,e){t.preventDefault();const s=e.getAttribute("data-show-target"),o=document.querySelector(s);o&&o.classList.toggle("temporarily-visible")}};var yt,bt,Et;r(),(yt=new f(document.querySelector("#mobil_mmenu"),"all")).navigation({title:"Меню"}),bt=yt.offcanvas({}),(Et=document.querySelector('a[href="#mobil_mmenu"]'))&&Et.addEventListener("click",(function(t){t.preventDefault(),bt.open()})),st(),document.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelector(".nav.nav-tabs li:first-child a");t&&t.click();const e=document.querySelector('input[name="site_url"]');e&&(e.value=window.location.href),document.querySelectorAll(".logo-link").forEach((t=>{if(t&&"/"===window.location.pathname){const e=t.querySelector("img");e&&(t.outerHTML=e.outerHTML)}})),document.documentElement.classList.add("visible"),setTimeout((()=>{const t=document.getElementById("preload-css");t&&t.remove()}),300),at(),function(t=document){t.querySelectorAll(".article-cart img").forEach((t=>{const e=function(t){const e=.7,s=document.createElement("canvas"),o=s.getContext("2d"),n=10;s.width=n,s.height=n,o.drawImage(t,0,0,n,n);const i=o.getImageData(0,0,n,n).data;let r=0,a=0,c=0;const l=n*n;for(let t=0;t<i.length;t+=4)r+=i[t],a+=i[t+1],c+=i[t+2];return r=Math.floor(r/l*e),a=Math.floor(a/l*e),c=Math.floor(c/l*e),`rgb(${r}, ${a}, ${c})`}(t);t.closest(".article-cart").style.background=e}))}()}));$("#top3").outerHeight();localStorage.getItem("display")||localStorage.setItem("display","grid"),document.addEventListener("scroll",(function(){document.querySelector(".btn-scroll-top").classList.toggle("show",window.scrollY>100)}));const St=document.querySelector(".btn-scroll-top");function kt(t){const e=parseInt(Math.abs(t))+"",s=e.length>3?e.length%3:0;return(s?e.substr(0,s)+" ":"")+e.substr(s).replace(/(\d{3})(?=\d)/g,"$1 ")+" ₽"}St&&St.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})}));const xt=document.querySelector(".footer-category"),qt=document.querySelector(".page_description");qt&&xt?.appendChild(qt),document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".page_description").forEach((t=>{const e=t.querySelector(".description");if(!e)return;const s=document.createElement("div");s.className="description-fade";const o=document.createElement("button");o.className="toggle-btn",o.type="button",e.appendChild(s),t.appendChild(o);e.scrollHeight>e.clientHeight+5?o.addEventListener("click",(function(){e.classList.toggle("expanded")})):(s.remove(),o.remove(),e.style.maxHeight="none")}))}))},814:()=>{}},s={};function o(t){var n=s[t];if(void 0!==n)return n.exports;var i=s[t]={exports:{}};return e[t](i,i.exports,o),i.exports}o.m=e,t=[],o.O=(e,s,n,i)=>{if(!s){var r=1/0;for(d=0;d<t.length;d++){for(var[s,n,i]=t[d],a=!0,c=0;c<s.length;c++)(!1&i||r>=i)&&Object.keys(o.O).every((t=>o.O[t](s[c])))?s.splice(c--,1):(a=!1,i<r&&(r=i));if(a){t.splice(d--,1);var l=n();void 0!==l&&(e=l)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[s,n,i]},o.d=(t,e)=>{for(var s in e)o.o(e,s)&&!o.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},o.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={792:0};o.O.j=e=>0===t[e];var e=(e,s)=>{var n,i,[r,a,c]=s,l=0;if(r.some((e=>0!==t[e]))){for(n in a)o.o(a,n)&&(o.m[n]=a[n]);if(c)var d=c(o)}for(e&&e(s);l<r.length;l++)i=r[l],o.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return o.O(d)},s=self.webpackChunkclimkey_3039=self.webpackChunkclimkey_3039||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})(),o.O(void 0,[11],(()=>o(340)));var n=o.O(void 0,[11],(()=>o(814)));n=o.O(n)})();