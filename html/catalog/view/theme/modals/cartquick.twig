{% extends 'modals/base.twig' %}

{% set heading = products ? heading_cartpopupquick_title : heading_cartpopup_title_empty %}
{% set error = error_warning %}
  
{% block content %}
  {% if (products) %} 
    <table class="display-products-cart">
      <tbody>
        {% for product in products %} 
        <tr>
          <td class="image">
            {% if (product['thumb']) %} 
            <a href="{{ product['href'] }}"><img src="{{ product['thumb'] }}" alt="{{ product['name'] }}" title="{{ product['name'] }}" class="img-thumbnail" /></a>
            {% endif %} 
          </td>
          <td class="name">
            <a href="{{ product['href'] }}">{{ product['name'] }}</a>
            {% if (not product['stock']) %} 
            <span class="text-danger">***</span>
            {% endif %} 
            {% if (product['option']) %} 
            {% for option in product['option'] %} 
            <br />
            {{ option['name'] }}: {{ option['value'] }} 
            {% endfor %} 
            {% endif %} 
            {% if (product['reward']) %} 
            <br />
            {{ product['reward'] }} 
            {% endif %} 
          </td>
          <td class="qt">
            <div class="number">
              <input name="product_id" value="{{ product['key'] }}" style="display: none;" type="hidden" />
              <div class="frame-change-count">
                <div class="btn-plus">
                  <button type="button" "{{ product['quantity_pr'] }}">+</button>
                </div>
                <div class="btn-minus">
                  <button type="button" "{{ product['quantity_pr'] }}">-</button>
                </div>
              </div>
              <input type="text" name="quantity" value="{{ product['quantity'] }}" class="plus-minus" "{{ product['key'] }}, {{ product['quantity_pr'] }}, {{ product['quantity_pr'] }}" />
            </div>
          </td>
          <td class="totals">{{ product['total'] }}</td>
		  <td class="remove">
            <button type="button"><i class="fa fa-trash-o"></i></button>
            <input name="product_key" value="{{ product['key'] }}" style="display: none;" hidden />           
          </td>
        </tr>
        {% endfor %} 
      </tbody>
    </table>
    <div class="mobile-products-cart">
    {% for product in products %} 
      <div>
        <div class="image">
          {% if (product['thumb']) %} 
          <a href="{{ product['href'] }}"><img src="{{ product['thumb'] }}" alt="{{ product['name'] }}" title="{{ product['name'] }}" class="img-thumbnail" /></a>
          {% endif %} 
        </div>
        <div class="name">
          <a href="{{ product['href'] }}">{{ product['name'] }}</a>
          {% if (not product['stock']) %} 
          <span class="text-danger">***</span>
          {% endif %} 
          {% if (product['option']) %} 
          {% for option in product['option'] %} 
          <br />
          {{ option['name'] }}: {{ option['value'] }} 
          {% endfor %} 
          {% endif %} 
          {% if (product['reward']) %} 
          <br />
          {{ product['reward'] }} 
          {% endif %} 
        </div>
        <div class="qt">
          <div class="number">
              <input name="product_id" value="{{ product['key'] }}" style="display: none;" type="hidden" />
              <div class="frame-change-count">
                <div class="btn-plus">
                  <button type="button" "{{ product['quantity_pr'] }}">+</button>
                </div>
                <div class="btn-minus">
                  <button type="button" "{{ product['quantity_pr'] }}">-</button>
                </div>
              </div>
              <input type="text" name="quantity" value="{{ product['quantity'] }}" class="plus-minus" "{{ product['key'] }}, {{ product['quantity_pr'] }}" />
            </div>
			<span class="remove">
			  <button type="button"><i class="fa fa-trash-o"></i></button>
			  <input name="product_key" value="{{ product['key'] }}" style="display: none;" hidden />
			</span>
        </div>
        <div class="totals">
          {{ product['total'] }} 
        </div>		
        </div>
      {% endfor %} 
    </div>
	
    <div class="all-total">
      {% for total in totals %} 
		<div class="clear-total">
		<div class="totals-right">{{ total['text'] }}</div>
        <div class="totals-left">{{ total['title'] }}:</div>     
        </div>
      {% endfor %} 
    </div>
	<form method="post" enctype="multipart/form-data" id="purchase-form">
		<div class="payment-info" style="padding-top: 0;">
			{% if (revtheme_catalog_popuporder['firstname']) %} 
			<div>
			  <label>{% if (revtheme_catalog_popuporder['firstname'] == 2) %}<span class="required">*</span>{% endif %}{{ enter_firstname }}</label>
			  <input name="firstname" value="{{ firstname }}" {% if (revtheme_catalog_popuporder['firstname'] == 2) %}required{% endif %}/>
			</div>
			{% endif %} 
			{% if (revtheme_catalog_popuporder['telephone']) %} 
			<div>
			  <label>{% if (revtheme_catalog_popuporder['telephone'] == 2) %}<span class="required">*</span>{% endif %}{{ enter_telephone }}</label>
			  <input name="telephone" value="{{ telephone }}" {% if (telephone_mask) %} data-mask="{{ telephone_mask }}" {% endif %} {% if (revtheme_catalog_popuporder['telephone'] == 2) %} required{% endif %} />
			</div>
			{% endif %} 
			{% if (revtheme_catalog_popuporder['email']) %} 
			<div>
			  <label>{% if (revtheme_catalog_popuporder['email'] == 2) %}<span class="required">*</span>{% endif %}{{ enter_email }}</label>
			  <input name="email" value="{{ email }}" {% if (revtheme_catalog_popuporder['email'] == 2) %}required{% endif %}/>
			</div>
			{% endif %} 
			{% if (revtheme_catalog_popuporder['comment']) %} 
			<div>
			  <label>{% if (revtheme_catalog_popuporder['comment'] == 2) %}<span class="required">*</span>{% endif %}{{ enter_comment }}</label>
			  <textarea name="comment" {% if (revtheme_catalog_popuporder['comment'] == 2) %}required{% endif %}>{{ comment }}</textarea>
			</div>
			{% endif %} 
		</div>
		{% if (text_agree_pol_konf) %} 
			<div class="rev_pol_konf pull-right text-right">
				<span>{{ text_agree_pol_konf }}</span>
				<input type="checkbox" name="agree_pol_konf" checked="checked" />
			</div>
		{% endif %} 
	</form>

  {% else %} 
    {{ text_cartpopup_empty }}
  {% endif %} 
{% endblock %}

{% block footer %}
  <button class="continue-shopping" data-action="close">{{ button_shopping }}</button>
  {% if ((not error_warning or zakaz) or not q_zavisimost) %} 
		<a id="popup-checkout-button" data-action="submit">{{ button_checkout }}</a>
  {% endif %} 
{% endblock %}
